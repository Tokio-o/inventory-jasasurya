<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flowly Inventory - Jasa Surya</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background: radial-gradient(circle at top right, #4f46e5, #3b82f6, #60a5fa);
            background-attachment: fixed;
            min-height: 100vh;
        }
        .flowly-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 2.5rem;
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
        }
        .nav-item {
            transition: all 0.3s ease;
            color: rgba(255, 255, 255, 0.7);
        }
        .nav-item:hover { color: white; transform: translateX(8px); }
        .nav-active {
            background: white;
            color: #2563eb !important;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .stat-icon-wrapper {
            width: 50px;
            height: 50px;
            background: #f1f5f9;
            border-radius: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex items-center justify-center">

    <div id="mainDashboard" class="w-full max-w-[1400px] min-h-[85vh] flowly-card flex flex-col md:flex-row overflow-hidden">
        
        <aside class="w-full md:w-72 p-10 flex flex-col border-r border-slate-100/50">
            <div class="mb-12">
                <div class="flex items-center gap-3 mb-2">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center text-white font-black italic">f</div>
                    <h1 class="text-xl font-extrabold tracking-tighter text-slate-800 uppercase">Flowly</h1>
                </div>
                <p class="text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] ml-1">Jasa Surya System</p>
            </div>

            <nav class="space-y-4 flex-1">
                <button onclick="switchTab('stok')" id="tabStok" class="nav-item nav-active w-full flex items-center gap-4 p-4 rounded-2xl font-bold text-sm">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" stroke-width="2"/></svg>
                    Dashboard
                </button>
                <button onclick="switchTab('keuangan')" id="tabKeuangan" class="nav-item w-full flex items-center gap-4 p-4 rounded-2xl font-bold text-sm text-slate-400 hover:text-blue-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                    Transactions
                </button>
                <button onclick="switchTab('analitik')" id="tabAnalitik" class="nav-item w-full flex items-center gap-4 p-4 rounded-2xl font-bold text-sm text-slate-400 hover:text-blue-600">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" stroke-width="2"/></svg>
                    Statistics
                </button>
            </nav>

            <div class="mt-auto">
                <button onclick="location.reload()" class="flex items-center gap-3 text-red-400 font-bold text-xs p-4 hover:bg-red-50 rounded-2xl w-full">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" stroke-width="2"/></svg>
                    Log Out System
                </button>
            </div>
        </aside>

        <main class="flex-1 p-10 overflow-y-auto bg-white/30">
            <header class="flex justify-between items-center mb-10">
                <h2 class="text-3xl font-black text-slate-800 tracking-tight">Overview</h2>
                <div class="flex items-center gap-4">
                    <div id="clock" class="font-bold text-slate-400 text-sm">00:00:00</div>
                    <div class="w-10 h-10 bg-blue-100 rounded-full border-2 border-white shadow-sm flex items-center justify-center text-blue-600 font-bold text-xs">JS</div>
                </div>
            </header>

            <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-10">
                <div class="bg-white p-6 rounded-[2rem] shadow-sm flex items-center gap-4">
                    <div class="stat-icon-wrapper text-blue-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" stroke-width="2"/></svg>
                    </div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Stock</p>
                        <h4 id="statTotalBuku" class="text-xl font-black text-slate-800">0</h4>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-[2rem] shadow-sm flex items-center gap-4">
                    <div class="stat-icon-wrapper text-emerald-600">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                    </div>
                    <div class="truncate">
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Balance</p>
                        <h4 id="statSaldo" class="text-xl font-black text-emerald-600 truncate">Rp 0</h4>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-[2rem] shadow-sm flex items-center gap-4">
                    <div class="stat-icon-wrapper text-orange-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" stroke-width="2"/></svg>
                    </div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Alert</p>
                        <h4 id="statAlert" class="text-sm font-black text-slate-800 uppercase italic">Stable</h4>
                    </div>
                </div>
                <div class="bg-white p-6 rounded-[2rem] shadow-sm flex items-center gap-4">
                    <div class="stat-icon-wrapper text-blue-400">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" stroke-width="2"/></svg>
                    </div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase">Role</p>
                        <h4 class="text-sm font-black text-slate-800 uppercase">Owner</h4>
                    </div>
                </div>
            </div>

            <div id="contentArea" class="grid grid-cols-1 lg:grid-cols-12 gap-8">
                <div class="lg:col-span-4 space-y-6">
                    <div class="bg-white p-8 rounded-[2.5rem] shadow-sm">
                        <h5 class="font-black text-slate-800 mb-6">Action Panel</h5>
                        <div class="space-y-3" id="formContainer">
                            </div>
                        <button id="mainBtn" onclick="processData()" class="w-full mt-6 bg-blue-600 text-white py-4 rounded-2xl font-bold shadow-lg shadow-blue-200 hover:scale-[1.02] transition-all">Submit Entry</button>
                    </div>
                </div>
                
                <div class="lg:col-span-8 bg-white p-4 rounded-[2.5rem] shadow-sm overflow-hidden">
                    <table class="w-full text-left border-separate border-spacing-y-2">
                        <thead class="text-[10px] font-black uppercase text-slate-300">
                            <tr id="tableHead"></tr>
                        </thead>
                        <tbody id="dataTable" class="text-sm"></tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script>
        let db_buku = JSON.parse(localStorage.getItem('f_buku')) || [];
        let db_uang = JSON.parse(localStorage.getItem('f_uang')) || [];
        let currentTab = 'stok';

        function updateClock() {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString('id-ID');
        }
        setInterval(updateClock, 1000); updateClock();

        function switchTab(tab) {
            currentTab = tab;
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('nav-active'));
            document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('nav-active');
            renderUI();
        }

        function renderUI() {
            const form = document.getElementById('formContainer');
            const head = document.getElementById('tableHead');
            const body = document.getElementById('dataTable');
            body.innerHTML = '';

            if(currentTab === 'stok') {
                form.innerHTML = `
                    <input type="text" id="in1" placeholder="Book Title" class="w-full p-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-blue-500 outline-none">
                    <input type="number" id="in2" placeholder="Quantity" class="w-full p-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-blue-500 outline-none">
                    <select id="in3" class="w-full p-4 bg-slate-50 border-none rounded-2xl font-bold outline-none">
                        <option value="In">Stock In (+)</option>
                        <option value="Out">Stock Out (-)</option>
                    </select>
                `;
                head.innerHTML = '<th class="px-6">Time</th><th class="px-6">Title</th><th class="px-6 text-center">Type</th><th class="px-6 text-center">Qty</th>';
                db_buku.forEach(item => {
                    body.innerHTML += `
                        <tr class="bg-slate-50/50 rounded-2xl">
                            <td class="p-4 px-6 text-slate-400 font-medium">${item.time}</td>
                            <td class="p-4 px-6 font-bold text-slate-700">${item.name}</td>
                            <td class="p-4 px-6 text-center"><span class="px-3 py-1 rounded-full text-[10px] font-black ${item.type==='In'?'bg-blue-100 text-blue-600':'bg-orange-100 text-orange-600'}">${item.type}</span></td>
                            <td class="p-4 px-6 text-center font-black">${item.qty}</td>
                        </tr>
                    `;
                });
            } else {
                form.innerHTML = `
                    <input type="text" id="in1" placeholder="Description" class="w-full p-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-emerald-500 outline-none">
                    <input type="number" id="in2" placeholder="Amount (Rp)" class="w-full p-4 bg-slate-50 border-none rounded-2xl focus:ring-2 focus:ring-emerald-500 outline-none">
                    <select id="in3" class="w-full p-4 bg-slate-50 border-none rounded-2xl font-bold outline-none">
                        <option value="In">Income (+)</option>
                        <option value="Out">Expense (-)</option>
                    </select>
                `;
                head.innerHTML = '<th class="px-6">Time</th><th class="px-6">Note</th><th class="px-6 text-center">Amount</th>';
                db_uang.forEach(item => {
                    body.innerHTML += `
                        <tr class="bg-slate-50/50 rounded-2xl">
                            <td class="p-4 px-6 text-slate-400 font-medium">${item.time}</td>
                            <td class="p-4 px-6 font-bold text-slate-700">${item.note}</td>
                            <td class="p-4 px-6 text-center font-black ${item.type==='In'?'text-emerald-600':'text-red-500'}">Rp ${item.val.toLocaleString()}</td>
                        </tr>
                    `;
                });
            }
            updateStats();
        }

        function processData() {
            const v1 = document.getElementById('in1').value;
            const v2 = parseInt(document.getElementById('in2').value);
            const v3 = document.getElementById('in3').value;
            const time = new Date().toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit'});

            if(currentTab === 'stok') {
                db_buku.unshift({ name: v1, qty: v2, type: v3, time });
                localStorage.setItem('f_buku', JSON.stringify(db_buku));
            } else {
                db_uang.unshift({ note: v1, val: v2, type: v3, time });
                localStorage.setItem('f_uang', JSON.stringify(db_uang));
            }
            renderUI();
        }

        function updateStats() {
            let total = 0;
            db_buku.forEach(b => { if(b.type==='In') total+=b.qty; else total-=b.qty; });
            document.getElementById('statTotalBuku').innerText = total;

            let saldo = 0;
            db_uang.forEach(u => { if(u.type==='In') saldo+=u.val; else saldo-=u.val; });
            document.getElementById('statSaldo').innerText = "Rp " + saldo.toLocaleString('id-ID');

            const alert = document.getElementById('statAlert');
            if(total <= 5) { alert.innerText = "Kritis"; alert.className = "text-sm font-black text-red-500 uppercase italic"; }
            else { alert.innerText = "Stable"; alert.className = "text-sm font-black text-emerald-500 uppercase italic"; }
        }

        renderUI();
    </script>
</body>
</html>
